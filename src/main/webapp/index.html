<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>POS Sample App</title>

    <script src="js/node_modules/angular/angular.min.js"></script>

    <!-- File upload, from https://github.com/danialfarid/ng-file-upload -->
    <script src="js/node_modules/ng-file-upload/dist/ng-file-upload-shim.js"></script>
    <script src="js/node_modules/ng-file-upload/dist/ng-file-upload.js"></script>

    <script src="js/posSample.js"></script>

    <!-- TODO: could split out the css file -->
    <link rel="stylesheet" type="text/css" href="css/styles.css"/>
    <link rel="stylesheet" type="text/css" href="css/fileUpload.css"/>
</head>
<body ng-app="posApp">

<div ng-controller="OrderEntryController">
    <form>
        <h4>Order entry</h4>

        <div>
            <button id="viewOrdersButton" class="smallHorizontalMargin">ORDERS</button>
        </div>

        <div id="itemsAndSummaryContainer">
            <div id="itemsList">
                <button class="itemButton smallMargin" ng-repeat="item in allItems" ng-click="addItem(item)">
                    {{item.name}}
                </button>
            </div>

            <div id="orderSidebar" class="smallMargin">
                <div>
                    <!-- TODO.  Also, pad order # with zeros -->
                    New Order / Order #099
                </div>

                <!-- The list of items in this order -->
                <div id="orderItemsPanel">
                    <div id="orderItemsList">
                        <div class="totalsPanelRow" ng-repeat="(name, entry) in itemsInOrder">
                            <div class="orderNumber">{{entry.quantity}}</div>
                            <div class="leftColumn">{{name}}</div>
                            <div class="rightColumn">{{entry.item.price | currency}}</div>
                        </div>
                    </div>
                    <div id="totalsPanel">
                        <div class="totalsPanelRow">
                            <div class="leftColumn">Subtotal:</div>
                            <div class="rightColumn" ng-bind="getSubtotal() | currency"></div>
                        </div>

                        <div class="totalsPanelRow">
                            <div class="leftColumn">Sales Tax:</div>
                            <div class="rightColumn" ng-bind="getSalesTax() | currency"></div>
                        </div>

                        <div class="totalsPanelRow">
                            <div class="leftColumn">Grand Total:</div>
                            <div class="rightColumn" ng-bind="getGrandTotal() | currency"></div>
                        </div>
                    </div>
                </div>

                <div class="smallVerticalMargin">
                    <button id="voidOrderButton">VOID</button>
                    <button id="payNowButton">PAY NOW</button>
                </div>
            </div>
        </div>
    </form>
</div>

<hr/>

<div ng-controller="FileUploadController">
    <form>
        <h4>Upload an items .csv file</h4>

        <button type="file" ngf-select="uploadFiles($file, $invalidFiles)"
                accept="image/*" ngf-max-height="1000" ngf-max-size="1MB">
            Select File
        </button>

        <br><br>

        <div style="font:smaller">{{f.name}} {{errFile.name}} {{errFile.$error}} {{errFile.$errorParam}}
      <span class="progress" ng-show="f.progress >= 0">
          <div style="width:{{f.progress}}%"
               ng-bind="f.progress + '%'"></div>
      </span>
        </div>

        {{uploadMessage}}
    </form>
</div>

</body>
</html>